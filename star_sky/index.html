<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>星空王国</title>

<link href="index_style.css" rel="stylesheet" type="text/css">
<script src="jquery.min.js" type="text/javascript"></script>

</head>
<body>  
  <div class="canvaszz"> 
    <h1 style = "position:absolute;left:50px;top:10%;color:#fff">
      星星的爱情
    </h1>
    <p style = "position:absolute;left:50px;top:20%;color:#fff">
        “小灰，你说天上的星星究竟有多少颗？”</br>
        “呵呵，我真希望我能数得完。”</br>
        “那小灰你听说过那个传说吗？一只兔子如果能数完天上所有的星星，那么他就能飞到
        天空中，这时他就可以选择自己也做一颗星星或是做一个天使。”</br>
        “很小的时候就听说过了，我还听我妈妈给我讲过一个数星星的兔子先生的故事呢！”</br>
        “真的吗？那你能讲给我听吗？”</br>
        “可以是可以，但你知道我妈妈讲的故事都是很奇怪的。”</br>
        “没关系没关系。”</br>
        “这个故事讲的是很久很久之前的某一天，一位兔子先生沉到了海底。海底很安静，兔
        子先生可以做任何他喜欢做的事，而他最喜欢做的事就是数星星了。因为兔子先生一直相信
        如果一个人想要离天空更近一点，那他只要一颗一颗数着天上的星星就好了。”</br>
        “从沉到海底的那一天开始，兔子先生一共数了五个世纪的星星，但还是没有得到最终
        的那个数字。因为星星最近越来越难数了，不仅天空遭到了污染，连海底也受到了越来越多
        的垃圾的侵扰。”</br>
        “但对此兔子先生并没有感到愤怒或是惋惜，因为海里的垃圾也是很有意思的。平时数
        星星数累了时，兔子先生就会去数各种各样的垃圾，一边数一边还给它们分类……可回收
        的、不可回收的……”</br>
        “直到有天从海面上飘下来了一个女孩。女孩的眼睛几乎就像星星一样美丽，自从她出
        现后数星星对兔子先生来说似乎也不是一件那么寂寞的事情了。不不，其实在女孩出现之前
        兔子先生根本不知道什么是寂寞。”</br>
        “兔子先生和女孩开始每天每夜都无休止地聊天，他们之间的话题简直就和天上的星星
        一样多。有时他们还拿海里的垃圾打赌——如果飘来的垃圾是可回收的，兔子先生就能亲一
        下女孩的脸庞；要是不可回收的，女孩就可以反过来去亲吻兔子先生一下。”</br>
        “渐渐兔子先生发现自己爱上了女孩。可他不知道他们在一起了多长时间，是一年，还
        是一整个世纪？无论有多久兔子先生都只觉得短暂。或许一切美好的，都是有限的。而一切
        有限的，就又都是短暂的。”</br>
        “那一天兔子先生终于数完了天上所有的星星，上帝来到了兔子先生身边和他并肩躺
        下。‘星星果然是离远了看才耀眼啊！’上帝说，‘你准备好了吗？只要你答出那个准确的数
        字，我就能让你成为天使。’”</br>
        “兔子先生看了看躺在自己另一边的女孩，没有回答。女孩突然用力扇了兔子先生一耳
        光大声道：‘笨蛋，快回答啊！你数了这么久的星星不就是为了能飞到天上去吗？’‘可
        是……’兔子先生还没把话说下去，女孩就又一边大叫着‘你这只笨兔子！’一边用力地打了兔
        子先生三个重重的耳光。”</br>
        “女孩哭了，眼泪迅速融入海水之中。‘上帝先生，我想我准备好了。’兔子先生这时说
        道，然后他对着上帝报出了那个他用了好几个世纪的时间才得出的数字。‘你确定是这个答
        案？’兔子先生听出了上帝问话的语气中所流露出的惋惜。兔子先生坚定地点了点头。‘那么
        抱歉，你回答错了。只好请你从头再数一遍了。’上帝说完，从海底站起身朝兔子先生挥了
        挥手便消失了。”</br>
        “兔子先生和女孩同时向对方转过身去，默默地对视了许久。‘笨兔子，你怎么答错了，
        你不是一直很有信心的吗？’女孩的声音是从未曾有过的温柔，听来既像是惋惜又像是释
        怀。‘嗯。我刚刚多答了两颗星星。’兔子先生淡淡地说。”</br>
        “兔小灰，原来兔子先生知道正确答案啊？那他为什么要故意多答两颗？”</br>
        “当时女孩也是这么质问兔子先生的。但兔子先生却沉默着没有开口，他只是一动不动
        地静静凝视着女孩那两颗好像星星一样闪烁着的眼睛。”</p>
        
        <p style = "position:absolute;right:50px;bottom:20%;color:rgb(255, 0, 0)">
          爱你哦！！！❤❤❤</br>        
        </p>
        <p style = "position:absolute;right:50px;bottom:10%;color:rgb(255, 0, 0)"> 
          </br>小灰笔记
        </p>
  </div>
  <canvas id="canvas">
  </canvas> 
</div>
<script>
//宇宙特效
"use strict";
var canvas = document.getElementById('canvas'),
  ctx = canvas.getContext('2d'),
  w = canvas.width = window.innerWidth,
  h = canvas.height = window.innerHeight,

  hue = 217,
  stars = [],
  count = 0,
  maxStars = 1300;//星星数量

var canvas2 = document.createElement('canvas'),
  ctx2 = canvas2.getContext('2d');
canvas2.width = 100;
canvas2.height = 100;
var half = canvas2.width / 2,
  gradient2 = ctx2.createRadialGradient(half, half, 0, half, half, half);
gradient2.addColorStop(0.025, '#CCC');
gradient2.addColorStop(0.1, 'hsl(' + hue + ', 61%, 33%)');
gradient2.addColorStop(0.25, 'hsl(' + hue + ', 64%, 6%)');
gradient2.addColorStop(1, 'transparent');

ctx2.fillStyle = gradient2;
ctx2.beginPath();
ctx2.arc(half, half, half, 0, Math.PI * 2);
ctx2.fill();

// End cache

function random(min, max) {
  if (arguments.length < 2) {
    max = min;
    min = 0;
  }

  if (min > max) {
    var hold = max;
    max = min;
    min = hold;
  }

  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function maxOrbit(x, y) {
  var max = Math.max(x, y),
    diameter = Math.round(Math.sqrt(max * max + max * max));
  return diameter / 2;
  //星星移动范围，值越大范围越小，
}

var Star = function() {

  this.orbitRadius = random(maxOrbit(w, h));
  this.radius = random(60, this.orbitRadius) / 8; 
  //星星大小
  this.orbitX = w / 2;
  this.orbitY = h / 2;
  this.timePassed = random(0, maxStars);
  this.speed = random(this.orbitRadius) / 50000; 
  //星星移动速度
  this.alpha = random(2, 10) / 10;

  count++;
  stars[count] = this;
}

Star.prototype.draw = function() {
  var x = Math.sin(this.timePassed) * this.orbitRadius + this.orbitX,
    y = Math.cos(this.timePassed) * this.orbitRadius + this.orbitY,
    twinkle = random(10);

  if (twinkle === 1 && this.alpha > 0) {
    this.alpha -= 0.05;
  } else if (twinkle === 2 && this.alpha < 1) {
    this.alpha += 0.05;
  }

  ctx.globalAlpha = this.alpha;
  ctx.drawImage(canvas2, x - this.radius / 2, y - this.radius / 2, this.radius, this.radius);
  this.timePassed += this.speed;
}

for (var i = 0; i < maxStars; i++) {
  new Star();
}

function animation() {
  ctx.globalCompositeOperation = 'source-over';
  ctx.globalAlpha = 0.5; //尾巴
  ctx.fillStyle = 'hsla(' + hue + ', 64%, 6%, 2)';
  ctx.fillRect(0, 0, w, h)

  ctx.globalCompositeOperation = 'lighter';
  for (var i = 1, l = stars.length; i < l; i++) {
    stars[i].draw();
  };

  window.requestAnimationFrame(animation);
}

animation();
</script>

</body>
</html>